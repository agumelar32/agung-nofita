<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      property="og:image"
      content="https://lisa-antoni.netlify.app/assets/img/link.png"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="The Wedding of Agung & Nofita" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="./assets/img/favicon.ico"
      type="image/x-icon"
    />
    <link rel="icon" href="./assets/img/favicon.ico" type="image/x-icon" />
    <title>Agung & Nofita | Wedding Invitation</title>
    <link rel="stylesheet" href="./src/css/main1.css" />

    <!-- swiper js -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.0.5/swiper-bundle.css"
    />
    <!-- aos -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />

    <style>
      /* Fade-slide animation */
      .fade-slide {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s ease, transform 0.8s ease;
      }
      .fade-slide.show {
        opacity: 1;
        transform: translateY(0);
      }

      /* Bottom navigation mewah */
      #bottomNav {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        background: rgba(0, 0, 0, 0.25);
        border-top-left-radius: 25px;
        border-top-right-radius: 25px;
        box-shadow: 0 -2px 15px rgba(255, 255, 255, 0.3),
          0 -4px 25px rgba(51, 203, 214, 0.3);
        backdrop-filter: blur(15px);
        z-index: 999;
        padding: 10px 0;
        overflow: hidden;
      }

            /* Daftar menu */
      #bottomNav ul {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 35px;
      }

      #bottomNav ul li a {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #ffffff;
        font-size: 1.6rem;
        transition: transform 0.3s ease, color 0.3s ease;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
      }

      /* Lingkaran highlight */
      #bottomNav ul li a::before {
        content: "";
        position: absolute;
        top: 3px;
        width: 50px;
        height: 50px;
        background: radial-gradient(
          circle at center,
          rgba(192, 240, 255, 0.6),
          rgba(0, 0, 0, 0.4)
        );
        border-radius: 50%;
        transform: scale(0);
        transition: transform 0.4s ease;
        z-index: -1;
      }

      /* Label teks */
      #bottomNav ul li a span {
        font-size: 0.75rem;
        font-weight: 500;
        margin-top: 4px;
        transition: color 0.3s ease;
      }

      /* Hover / Aktif */
      #bottomNav ul li a.active,
      #bottomNav ul li a:hover {
        color: #ffe6f0;
        transform: scale(1.15);
      }
      #bottomNav ul li a.active::before,
      #bottomNav ul li a:hover::before {
        transform: scale(1);
        box-shadow: 0 0 25px rgba(192, 240, 255, 0.8);
      }
      #bottomNav ul li a.active span,
      #bottomNav ul li a:hover span {
        color: #ffe6f0;
      }

      /* Efek Glow Pulse */
      
      @keyframes pulseGlow {
        from {
          text-shadow: 0 0 5px #000000, 0 0 10px #a9bbc6;
        }
        to {
          text-shadow: 0 0 15px #fff, 0 0 25px #a9bbc6;
        }
      }
      /* Tombol Musik */
      .music-btn {
        position: fixed;
        bottom: 80px;
        right: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        z-index: 1000;
        backdrop-filter: blur(10px);
        transition: transform 0.3s ease, background 0.3s ease;
      }

      .music-btn ion-icon {
        font-size: 2.2rem;
        color: #a9bbc6;
        transition: transform 0.3s ease;
      }

      .music-btn:hover {
        background: rgba(51, 189, 214, 0.15);
        transform: scale(1.1);
      }
    </style>
  </head>
  <body>
    <!-- welcome screen -->
    <div id="cover">
      <div class="bunga">
        <img
          class="bunga1"
          src="./assets/img/bunga1.png"
          alt="Bunga dekorasi 1"
        />
        <img
          class="bunga2"
          src="./assets/img/bunga2.png"
          alt="Bunga dekorasi 2"
        />
      </div>
      <div class="cover_text">
        <div class="text">
          <h3>The Wedding Of</h3>
          <div class="mempelai">
            <h1>Agung</h1>
            <h1>&</h1>
            <h1>Nofita</h1>
          </div>
        </div>
        <div class="tamu">
          <div class="text">
            <p>Kepada Yth.</p>
            <p>Bapak/Ibu/Saudara/i</p>
          </div>
          <div class="buka_undangan" style="cursor: pointer">
            <ion-icon name="mail-open-outline"></ion-icon>
            <span>Open Invitation</span>
          </div>
        </div>
      </div>
      <img
        src="./assets/img/unnamed.png"
        alt="Foto pasangan Agung & Nofita"
        class="bg_mempelai"
      />
    </div>

    <!-- main content -->
    <main id="mainContent" style="display: none">
      <!-- header -->
      <div id="header">
        <img src="./assets/img/unnamed.png"
        <img src="./assets/img/bunga3.png" alt="Dekorasi bunga" />
        <p class="A">The Wedding Of</p>
        <div class="header_couple">
          <img src="./assets/img/bunga_spacing.png" alt="Bunga pemisah" />
          <h1 class="couple-name">Agung</h1>
          <h1 class="couple-name">&</h1>
          <h1 class="couple-name">Nofita</h1>
        </div>
        <div class="date">
          <p class="title">Save the Date</p>
          <div id="countdownd">
            <div class="timer">
              <p class="hari">0</p>
              <span class="small_text">days</span>
            </div>
            <div class="timer">
              <p class="jam">0</p>
              <span class="small_text">hours</span>
            </div>
            <div class="timer">
              <p class="menit">0</p>
              <span class="small_text">minutes</span>
            </div>
            <div class="timer">
              <p class="detik">0</p>
              <span class="small_text">seconds</span>
            </div>
          </div>
        </div>
      </div>
      <!-- Quran Section -->
      <section
        id="quranSection"
        class="section"
        style="
          position: relative;
          background: linear-gradient(180deg, #a9bbc6,#a9bbc6);
          padding: 80px 20px;
          text-align: center;
          overflow: hidden;
        "
      >
        <!-- Motif atas -->
        <img
          src="./assets/img/motif.png"
          alt="Motif dekoratif"
          style="
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 1200px;
            opacity: 0.12;
            pointer-events: none;
            z-index: 0;
          "
        />

        <!-- Konten Quran -->
        <div
          style="
            position: relative;
            z-index: 1;
            animation: fadeIn 2s ease-in-out;
          "
        >
          <h2
            class="section-title"
            style="
              color: #6c6656;
              font-family: 'Italiana', serif;
              font-size: 2rem;
              margin-bottom: 20px;
            "
          >
            Ayat Al-Qur'an
          </h2>

          <p
            style="
              font-size: 1.4rem;
              font-family: 'Amiri Quran', serif;
              color: #6c6656;
              line-height: 2;
              max-width: 800px;
              margin: 20px auto;
            "
          >
            وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا
            لِّتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُم مَّوَدَّةً وَرَحْمَةً ۚ
            إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ
          </p>

          <p
            style="
              font-size: 1rem;
              color: #555;
              max-width: 700px;
              margin: 0 auto;
              font-style: italic;
            "
          >
            "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan
            untukmu pasangan-pasangan dari jenismu sendiri, agar kamu merasa
            tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan
            sayang. Sesungguhnya pada yang demikian itu benar-benar terdapat
            tanda-tanda bagi kaum yang berpikir." <br />
            <strong>(QS. Ar-Rum: 21)</strong>
          </p>
        </div>
      </section>

      <!-- Animasi sederhana -->
      <style>
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      </style>

      <!-- couple section -->
      <section id="coupleSection" class="section">
        <h2 class="section-title">Our Wonderful Couple</h2>
        <div class="couple-cards">
          <div class="couple-card">
            <img
              src="./assets/img/pasangan.png"
              alt="Agung"
              class="couple-img"
            />
            <div class="couple-info">
              <h3>Agung</h3>
              <p class="parents">Putra dari: Bapak Agus & Ibu Siti</p>
              <div class="ig-links">
                <a href="https://www.instagram.com/a_dc___/" target="_blank"
                  ><ion-icon name="logo-instagram"></ion-icon
                ></a>
              </div>
            </div>
          </div>
          <div class="couple-card">
            <img
              src="./assets/img/pasangan.png"
              alt="Nofita"
              class="couple-img"
            />
            <div class="couple-info">
              <h3>Nofita</h3>
              <p class="parents">Putri dari: Bapak Budi & Ibu Lina</p>
              <div class="ig-links">
                <a
                  href="https://www.instagram.com/fietanofita.mua/"
                  target="_blank"
                  ><ion-icon name="logo-instagram"></ion-icon
                ></a>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- wedding event section -->
      <section id="weddingEvent" class="section">
        <div class="container">
          <h2 class="section-title">Wedding Event</h2>
          <div class="event-cards">
            <!-- Akad Nikah -->
            <div class="event-card">
              <h3>Akad Nikah</h3>
              <p class="event-date">27 March 2026, 08:00 WIB</p>
              <p class="event-location">
                Masjid Al-Falah<br />
                Jl. Merpati No.12, Jakarta Pusat
              </p>
              <div class="map-box">
                <a
                href="https://goo.gl/maps/xxxx"
                target="_blank"
                class="map-btn"
              >
                <ion-icon name="location-outline"></ion-icon>
                Google Map
              </a>
              </div>
              
            </div>

            <!-- Resepsi -->
            <div class="event-card">
              <h3>Resepsi</h3>
              <p class="event-date">27 March 2026, 11:00 WIB</p>
              <p class="event-location">
                Gedung Serba Guna<br />
                Jl. Kenanga No.45, Jakarta Selatan
              </p>
              <div class="map-box">
                <a
                href="https://goo.gl/maps/yyyy"
                target="_blank"
                class="map-btn"
              >
                <ion-icon name="location-outline"></ion-icon>
                Google Map
              </a>
              </div>
              
            </div>
          </div>
        </div>
      </section>
      <!--galery-->
      <section id="gallerySection" class="section">
        <h2 class="section-title">Gallery</h2>
        <div class="swiper gallery-swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="./assets/img/pasangan.png" alt="Gallery 1" />
            </div>
            <div class="swiper-slide">
              <img src="./assets/img/pasangan.png" alt="Gallery 2" />
            </div>
            <div class="swiper-slide">
              <img src="./assets/img/pasangan.png" alt="Gallery 3" />
            </div>
            <div class="swiper-slide">
              <img src="./assets/img/pasangan.png" alt="Gallery 4" />
            </div>
            <div class="swiper-slide">
              <img src="./assets/img/pasangan.png" alt="Gallery 5" />
            </div>
          </div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-pagination"></div>
        </div>
      </section>

              <!-- Daftar Hadir -->
              <section id="attendance">
              <h2>Konfirmasi Kehadiran</h2>
              <p style="text-align: center;">Mohon kesediyaannya untuk melakukan konfirmasi kehadiran, supaya kami bisa mempersiapkan kehadiran anda dengan baik</p> 
              <form id="attendanceForm">
                <input type="text" id="attendeeName" placeholder="Nama Anda" required>
                <input type="number" id="attendeeCount" placeholder="Jumlah Tamu" required>
                <select id="attendanceStatus" required>
                  <option value="">Pilih Kehadiran</option>
                  <option value="Hadir">Hadir</option>
                  <option value="Tidak Hadir">Tidak Hadir</option>
                </select>
                <button type="submit">Kirim Konfirmasi</button>
                <div id="attendanceSuccess">Terima kasih! Konfirmasi Anda telah diterima.</div>
              </form>
            </section>

            <!--kirim hadiah-->
            <section id="giftSection" class="section giftsection">
        <h2 class="section-title">Wedding Gift</h2>
        <p class="gift-desc">Doa Restu Anda merupakan karunia yang sangat berarti bai kami. Dan jika memberi adalah ungkapan tanda kasih Anda Anda dapat memberi kado melalui:</p>

        <!-- Tombol Gift -->
        <button id="giftBtn" class="gift-icon" title="Kirim Hadiah" style="background-color: #a9bbc6;">
          <ion-icon name="gift-outline"></ion-icon>
          <span class="gift-label">Kirim Hadiah</span>
        </button>

        <!-- Popup Gift Modal -->
        <div id="giftModal" class="gift-modal">
          <div class="gift-modal-content">
            <span class="close-modal">&times;</span>
            <h3 class="modal-title">Kirim Hadiah</h3>

           <div class="gift-card-wrapper">
            <!-- Kartu BCA -->
            <div class="gift-card atm-card bca">
              <div class="card-inner">
                <div class="card-front">
                  <img
                    src="./assets/img/bri-logo.png"
                    alt="BCA"
                    class="bank-logo"
                  />
                  <p class="card-chip">💳</p>
                  <p class="card-name">Agung Dwi Cahyono</p>
                </div>
                <div class="card-back">
                  <p class="card-number">1234 5678 9012 3456</p>
                  <button class="copy-btn" data-rek="1234567890">
                    Salin Nomor
                  </button>
                </div>
              </div>
             </div>
            </div>
            <!-- Kartu Mandiri -->
            <div class="gift-card atm-card mandiri">
              <div class="card-inner">
                <div class="card-front">
                  <img
                    src="./assets/img/mandiri-logo.png"
                    alt="Mandiri"
                    class="bank-logo"
                  />
                  <p class="card-chip">💳</p>
                  <p class="card-name">Nofita Hidayati</p>
                </div>
                <div class="card-back">
                  <p class="card-number">9876 5432 1098 7654</p>
                  <button class="copy-btn" data-rek="9876543210">
                    Salin Nomor
                  </button>
                </div>
              </div>
            </div>
          </section>

            <section id="messages">
              <h2>Friends Wishes</h2>
              <form id="messageForm">
                <input type="text" id="guestName" placeholder="Nama Anda" required>
                <textarea id="guestMessage" placeholder="Tulis ucapan dan doa..." required></textarea>
                <button type="submit">Kirim Ucapan</button>
                <div id="msgStatus">Terima kasih atas ucapan Anda 💖</div>
              </form>
              <div id="messageList"></div>
            </section>
            </main>

    <!-- GSAP -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"
      defer
    ></script>
    <!-- ion icon -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <!-- swiper js -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.0.5/swiper-bundle.min.js"
      defer
    ></script>
    <!-- aos -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"
      defer
    ></script>
   
    <!-- Bottom Navigation -->
    <nav id="bottomNav" style="display: none">
      <ul>
        <li>
          <a href="#header" 
            ><ion-icon name="home-outline"></ion-icon><span>Home</span></a
          >
        </li>
        <li>
          <a href="#coupleSection" 
            ><ion-icon name="heart-outline"></ion-icon><span>Couple</span></a
          >
        </li>
        <li>
          <a href="#gallerySection"
            ><ion-icon name="images-outline"></ion-icon><span>Galeri</span></a
          >
        </li>
        <li>
          <a href="#giftSection"
            ><ion-icon name="gift-outline"></ion-icon><span>Gift</span></a
          >
        </li>
        <li>
          <a href="#messages"
            ><ion-icon name="chatbubble-ellipses-outline"></ion-icon
            ><span>Wishes</span></a
          >
        </li>
      </ul>
    </nav>
  
    <!--music-->
    <audio id="bgMusic" src="agung-nofita/assets/music/Wedding.mp3" loop></audio>
    <!-- Tombol Musik -->
    <div id="musicControl" class="music-btn" style="display: none">
      <ion-icon name="pause-circle"></ion-icon>
    </div>

    <script>
      const bgMusic = document.getElementById("bgMusic");
      const musicControl = document.getElementById("musicControl");

      // Musik otomatis saat undangan dibuka
      document.querySelector(".buka_undangan").addEventListener("click", () => {
        // Tunggu halaman tampil dulu
        setTimeout(() => {
          bgMusic.play().catch(() => {
            console.log("Autoplay diblokir, user harus menekan tombol play.");
          });
          musicControl.style.display = "flex";
        }, 1500);
      });

      // Tombol play/pause
      let isPlaying = true;
      musicControl.addEventListener("click", () => {
        if (isPlaying) {
          bgMusic.pause();
          musicControl.innerHTML = '<ion-icon name="play-circle"></ion-icon>';
        } else {
          bgMusic.play();
          musicControl.innerHTML = '<ion-icon name="pause-circle"></ion-icon>';
        }
        isPlaying = !isPlaying;
      });
 
      // Countdown
      const weddingDate = new Date("Mar 27, 2026 08:00:00").getTime();
      const countdownElement = document.getElementById("countdownd");
      const countdown = setInterval(() => {
        const now = new Date().getTime();
        const distance = weddingDate - now;
        if (distance < 0) {
          clearInterval(countdown);
          countdownElement.innerHTML =
            "<div class='timer'><p>Hari ini!</p></div>";
          return;
        }
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        countdownElement.querySelector(".hari").innerText = String(
          days
        ).padStart(2, "0");
        countdownElement.querySelector(".jam").innerText = String(
          hours
        ).padStart(2, "0");
        countdownElement.querySelector(".menit").innerText = String(
          minutes
        ).padStart(2, "0");
        countdownElement.querySelector(".detik").innerText = String(
          seconds
        ).padStart(2, "0");
      }, 1000);

      // 🔖 Ambil nama tamu dari URL
      const params = new URLSearchParams(window.location.search);
      const guestName = params.get("to");
    
      if (guestName) {
        // Temukan elemen tamu di cover
        const tamuContainer = document.querySelector(".tamu .text");
    
        // Tambahkan nama tamu ke bawah teks Kepada Yth.
        const guestLine = document.createElement("p");
        guestLine.classList.add("guest-name");
        guestLine.textContent = guestName;
        tamuContainer.appendChild(guestLine);
      }

        // Open invitation
        document.querySelector(".buka_undangan").addEventListener("click", () => {
          const cover = document.getElementById("cover");
          const main = document.getElementById("mainContent");
          const bottomNav = document.getElementById("bottomNav");

          gsap.to(cover, {
            duration: 1,
            opacity: 0,
            onComplete: () => {
              cover.style.display = "none";
              main.style.display = "block";
              gsap.from(main, { duration: 1, opacity: 0, y: 50 });
              gsap.from(".couple-name", {
                duration: 1,
                opacity: 0,
                y: 30,
                stagger: 0.3,
                delay: 1,
              });
              const couplePhoto = document.querySelector(".bg_mempelai");
              if (couplePhoto) {
                gsap.from(couplePhoto, {
                  duration: 1,
                  opacity: 0,
                  scale: 0.8,
                  delay: 1.5,
                });
              }
              bottomNav.style.display = "flex";
            },
          });
        });

        // Smooth scroll + active nav highlight
        const sections = document.querySelectorAll(
          "main .section, #header, #cover"
        );
        const navLinks = document.querySelectorAll("#bottomNav ul li a");
        window.addEventListener("scroll", () => {
          let current = "";
          sections.forEach((section) => {
            const sectionTop = section.offsetTop - 150;
            if (pageYOffset >= sectionTop) current = section.getAttribute("id");
          });
          navLinks.forEach((link) => {
            link.classList.remove("active");
            if (link.getAttribute("href") === "#" + current)
              link.classList.add("active");
          });

        // fade-slide
          sections.forEach((section) => {
            const sectionTop = section.getBoundingClientRect().top;
            if (sectionTop < window.innerHeight - 100)
              section.classList.add("show");
          });
        });
        navLinks.forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            target.scrollIntoView({ behavior: "smooth" });
          });
        });

        // Initialize swiper
        window.addEventListener("load", () => {
          new Swiper(".gallery-swiper", {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
            pagination: { el: ".swiper-pagination", clickable: true },
            navigation: {
              nextEl: ".swiper-button-next",
              prevEl: ".swiper-button-prev",
            },
            breakpoints: {
              640: { slidesPerView: 2 },
              1024: { slidesPerView: 3 },
            },
          });
        });

        // Gift Modal

        document.addEventListener("DOMContentLoaded", () => {
          const giftBtn = document.getElementById("giftBtn");
          const giftModal = document.getElementById("giftModal");
          const closeModal = document.querySelector(".close-modal");

          // Tutup modal jika klik di luar area
        document.addEventListener("click", (e) => {
          if (!giftModal.contains(e.target) && e.target !== giftBtn) {
            giftModal.classList.remove("show");
          }
        });

        // Tutup manual via tombol close
        closeModal.addEventListener("click", (e) => {
          e.stopPropagation();
          giftModal.classList.remove("show");
        });
        

        // 💳 Efek flip kartu
        document.querySelectorAll(".atm-card").forEach((card) => {
          card.addEventListener("click", () => {
            card.classList.toggle("flipped");
          });
        });

        // 📋 Salin nomor rekening
        document.querySelectorAll(".copy-btn").forEach((btn) => {
          btn.addEventListener("click", (e) => {
            e.stopPropagation();
            const rek = btn.dataset.rek;
            navigator.clipboard.writeText(rek);
            btn.textContent = "Disalin!";
            setTimeout(() => (btn.textContent = "Salin Nomor"), 2000);
          });
        });
      });
      </script>

<!-- 🔥 Firebase Script -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getDatabase,
      ref,
      push,
      set,
      onValue
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Konfigurasi Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAeiZvgS_38kFl0xeqVgMP-Yidts7QCnHk",
      authDomain: "agung-nofita-424a3.firebaseapp.com",
      databaseURL: "https://agung-nofita-424a3-default-rtdb.firebaseio.com",
      projectId: "agung-nofita-424a3",
      storageBucket: "agung-nofita-424a3.firebasestorage.app",
      messagingSenderId: "981786734105",
      appId: "1:981786734105:web:4bc3a0638d564d59880488"
    };

    // Inisialisasi Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 🎉 Attendance Form
    const attendanceForm = document.getElementById("attendanceForm");
    const attendanceSuccess = document.getElementById("attendanceSuccess");

    attendanceForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("attendeeName").value.trim();
      const count = document.getElementById("attendeeCount").value.trim();
      const status = document.getElementById("attendanceStatus").value;

      if (!name || !count || !status) return alert("Mohon lengkapi semua kolom!");

      const newRef = push(ref(db, "attendance"));
      set(newRef, {
        name,
        count,
        status,
        time: new Date().toISOString()
      }).then(() => {
        attendanceSuccess.style.display = "block";
        attendanceForm.reset();
        setTimeout(() => (attendanceSuccess.style.display = "none"), 3000);
      });
    });

    // 💌 Ucapan & Doa Form
    const messageForm = document.getElementById("messageForm");
    const msgStatus = document.getElementById("msgStatus");
    const msgList = document.getElementById("messageList");

    messageForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("guestName").value.trim();
      const message = document.getElementById("guestMessage").value.trim();
      if (!name || !message) return alert("Nama dan pesan harus diisi!");

      const newMsgRef = push(ref(db, "ucapan"));
      set(newMsgRef, {
        name,
        message,
        time: new Date().toISOString()
      }).then(() => {
        msgStatus.style.display = "block";
        messageForm.reset();
        setTimeout(() => (msgStatus.style.display = "none"), 3000);
      });
    });

// 🕊️ Realtime load ucapan (fitur lihat semua + sembunyikan)
onValue(ref(db, "ucapan"), (snapshot) => {
  const data = snapshot.val();
  msgList.innerHTML = "";

  if (data) {
    const allMessages = Object.values(data)
      .sort((a, b) => new Date(b.time) - new Date(a.time)); // urut terbaru

    let showingAll = false; // status tampilan
    const renderMessages = () => {
      msgList.innerHTML = "";

      // kalau showingAll true → tampilkan 20, kalau false → tampilkan 5
      const limit = showingAll ? 20 : 5;
      const messages = allMessages.slice(0, limit);

      messages.forEach(({ name, message, time }) => {
        const div = document.createElement("div");
        div.classList.add("message-item");

        const localTime = new Date(time).toLocaleString("id-ID", {
          dateStyle: "short",
          timeStyle: "short",
        });

        div.innerHTML = `
          <strong>${name}</strong>
          <span class="msg-time">🕒 ${localTime}</span>
          <p>${message}</p>
        `;
        msgList.appendChild(div);
      });

      // jika jumlah pesan > 5 → tampilkan tombol lihat semua / sembunyikan
      if (allMessages.length > 5) {
        const toggleBtn = document.createElement("button");
        toggleBtn.textContent = showingAll
          ? "Sembunyikan Ucapan "
          : "Lihat Semua Ucapan ";
        toggleBtn.classList.add("see-all-btn");

        toggleBtn.addEventListener("click", () => {
          showingAll = !showingAll;
          renderMessages(); // render ulang sesuai status
        });

        msgList.appendChild(toggleBtn);
      }
    };

    // render awal (hanya 5 ucapan)
    renderMessages();
  }
});
    
    const giftBtn = document.getElementById("giftBtn");
const giftModal = document.getElementById("giftModal");

giftBtn.addEventListener("click", (e) => {
  e.stopPropagation();

  if (giftModal.classList.contains("show")) {
    // Slide Up
    giftModal.classList.remove("show");
    giftModal.style.maxHeight = giftModal.scrollHeight + "px"; // set current height
    requestAnimationFrame(() => {
      giftModal.classList.add("closing");
      giftModal.style.maxHeight = "0";
      giftModal.style.opacity = "0";
    });

    giftModal.addEventListener(
      "transitionend",
      function handler() {
        giftModal.classList.remove("closing");
        giftModal.style.maxHeight = "";
        giftModal.removeEventListener("transitionend", handler);
      }
    );
  } else {
    // Slide Down
    giftModal.classList.add("show");
    giftModal.classList.add("opening");
    giftModal.style.maxHeight = "0";
    giftModal.style.opacity = "0";

    requestAnimationFrame(() => {
      const scrollHeight = giftModal.scrollHeight;
      giftModal.style.maxHeight = scrollHeight + "px";
      giftModal.style.opacity = "1";
    });

    giftModal.addEventListener(
      "transitionend",
      function handler() {
        giftModal.classList.remove("opening");
        giftModal.style.maxHeight = ""; // reset to auto
        giftModal.removeEventListener("transitionend", handler);
      }
    );
  }
});

    </script>
  </body>
</html>
